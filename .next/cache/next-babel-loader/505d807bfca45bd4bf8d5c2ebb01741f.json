{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n    height: 100vh;\\n    justify-content: center;\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 700px;\\n    margin-left: auto;\\n    margin-right: auto;\\n    display: flex;\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 10px;\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 10px;\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 10px;\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 40px;\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 40px;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 10px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    margin-top: 10px;\\n    color: #858585;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n    padding-left: 10px;\\n    margin: 0;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n    text-decoration: blink;\\n    padding-left: 10px;\\n    color: #2664d9;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n    margin-top: 10px;\\n    padding-left: 10px;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 88%;\\n    display: flex;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    width: 88%;\\n    flex-flow: column;\\n    margin-top: 10px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 75px;\\n    margin-top: 10px;\\n    border-radius: 10px;\\n    margin-bottom: 10px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    background: rgba(128, 128, 128, 0.5);\\n    width: 700px;\\n    margin-left: auto;\\n    margin-right: auto;\\n    height: 1px;\\n    border: 0;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMapMarkerAlt, faEnvelope, faStar, faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport styled, { css } from 'styled-components';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { addSum as _addSum, addData as _addData } from '../redux/actions/index';\n\nvar sumStateToProps = function sumStateToProps(state) {\n  return {\n    sum: state.sum\n  };\n};\n\nvar dataStateToProps = function dataStateToProps(state) {\n  return {\n    data: state.data\n  };\n};\n\nfunction sumDispatchToProps(dispatch) {\n  return {\n    addSum: function addSum(sum) {\n      return dispatch(_addSum(sum));\n    }\n  };\n}\n\nfunction dataDispatchToProps(dispatch) {\n  return {\n    addData: function addData(data) {\n      return dispatch(_addData(data));\n    }\n  };\n}\n\nvar axiosGitHubGraphQL = axios.create({\n  baseURL: 'https://api.github.com/graphql',\n  headers: {\n    Authorization: 'bearer 2cdc2aa829e6a0fe455edaf962cdda54e923b505'\n  }\n});\nvar GET_RATE = \"\\n{\\n    search(   \\n      type: USER, query:\\\"location:Kharkiv sort:followers-desc\\\"\\n      first: 10) {\\n      nodes {\\n        ... on User {\\n          name\\n          login\\n          avatarUrl\\n          url\\n          bio\\n          location\\n          email\\n          repositories{totalCount}\\n          topRepositories(first: 100, orderBy:{field: STARGAZERS, direction: DESC}) {\\n            edges {\\n              node {\\n                stargazers{totalCount}\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\";\nvar Divider = styled.hr(_templateObject());\nvar Avatar = styled.img(_templateObject2());\nvar Info = styled.div(_templateObject3());\nvar Login = styled.div(_templateObject4());\nvar Status = styled.div(_templateObject5());\nvar Link = styled.a(_templateObject6());\nvar Name = styled.p(_templateObject7());\nvar Icons = styled.div(_templateObject8());\nvar LocationIcon = styled.div(_templateObject9());\nvar MailIcon = styled.div(_templateObject10());\nvar StarIcon = styled.div(_templateObject11());\nvar Stars = styled.div(_templateObject12());\nvar Location = styled.div(_templateObject13());\nvar MailAdress = styled.div(_templateObject14());\nvar Block = styled.div(_templateObject15());\nvar Loading = styled.div(_templateObject16());\n\nvar ConnectedUsers =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ConnectedUsers, _React$Component);\n\n  function ConnectedUsers(props) {\n    var _this;\n\n    _classCallCheck(this, ConnectedUsers);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConnectedUsers).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"GET_SUM_FIRST_HUNDRED\", function (login) {\n      return \"query \\n{\\n  search(   \\n    type: USER, query:\\\"user:\".concat(login, \"\\\"\\n    first: 1) {\\n    nodes {\\n      ... on User {\\n        login\\n        repositories (first:100) {\\n      pageInfo {\\n        hasNextPage,\\n        endCursor\\n      },\\n      nodes {\\n        stargazers{totalCount}\\n      }\\n      }\\n    }\\n  }\\n}\\n}\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"GET_SUM_HUNDRED\", function (login, after) {\n      return \"query \\n{\\n  search(   \\n    type: USER, query:\\\"user:\".concat(login, \"\\\"\\n    first: 1) {\\n    nodes {\\n      ... on User {\\n        login\\n        repositories (first:100, after:\\\"\").concat(after, \"\\\") {\\n      pageInfo {\\n        hasNextPage,\\n        endCursor\\n      },\\n      nodes {\\n        stargazers{totalCount}\\n      }\\n      }\\n    }\\n  }\\n}\\n}\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFetchSumHundredFromGitHub\", function (user, number, endCursor) {\n      var that = _assertThisInitialized(_this);\n\n      var after = endCursor.toString();\n      var login = user;\n      var key = number;\n      axiosGitHubGraphQL.post('', {\n        query: that.GET_SUM_HUNDRED(login, after)\n      }).then(function (result) {\n        var array = result.data.data.search.nodes[0].repositories;\n        that.getSumHundred(array, key);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFetchSumForFirstHundredFromGitHub\", function (user, number) {\n      var that = _assertThisInitialized(_this);\n\n      var login = user;\n      var key = number;\n      axiosGitHubGraphQL.post('', {\n        query: that.GET_SUM_FIRST_HUNDRED(login)\n      }).then(function (result) {\n        var array = result.data.data.search.nodes[0].repositories;\n        that.getSumFirstHundred(array, key, login);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFetchFromGitHub\", function () {\n      var that = _assertThisInitialized(_this);\n\n      axiosGitHubGraphQL.post('', {\n        query: GET_RATE\n      }).then(function (result) {\n        var array = result.data.data.search.nodes;\n\n        for (var i = 0; i < 10; i++) {\n          _this.props.addData({\n            data: [array[i].avatarUrl, array[i].bio, array[i].email, array[i].location, array[i].login, array[i].name, array[i].url]\n          });\n\n          if (array[i].repositories.totalCount > 100) {\n            that.onFetchSumForFirstHundredFromGitHub(array[i].login, i);\n          } else {\n            that.getSum(array[i].topRepositories.edges, i);\n          }\n        }\n      })[\"catch\"](function (error) {\n        alert(error);\n      });\n    });\n\n    _this.getSum = _this.getSum.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ConnectedUsers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.onFetchFromGitHub();\n    }\n  }, {\n    key: \"getSumHundred\",\n    value: function getSumHundred(array, number, name) {\n      var key = number;\n      var summ = 0;\n      var login = name;\n      var sum = this.props.sum;\n      array.nodes.forEach(function (element) {\n        summ += element.stargazers.totalCount;\n      });\n      summ += sum[key];\n      this.props.addSum({\n        sum: [summ, key]\n      });\n    }\n  }, {\n    key: \"getSumFirstHundred\",\n    value: function getSumFirstHundred(array, number, name) {\n      var key = number;\n      var sum = 0;\n      var login = name;\n      array.nodes.forEach(function (element) {\n        sum += element.stargazers.totalCount;\n      });\n      this.props.addSum({\n        sum: [sum, key]\n      });\n\n      if (array.pageInfo.hasNextPage === true) {\n        this.onFetchSumHundredFromGitHub(login, key, array.pageInfo.endCursor);\n      }\n    }\n  }, {\n    key: \"getSum\",\n    value: function getSum(array, number) {\n      var key = number;\n      var sum = 0;\n\n      if (array !== undefined) {\n        array.forEach(function (element) {\n          sum += element.node.stargazers.totalCount;\n        });\n      }\n\n      this.props.addSum({\n        sum: [sum, key]\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          sum = _this$props.sum;\n      return __jsx(React.Fragment, null, data.length === 0 ? __jsx(Loading, null, __jsx(FontAwesomeIcon, {\n        icon: faSpinner,\n        size: \"4x\",\n        spin: true,\n        pulse: true\n      })) : __jsx(React.Fragment, null, __jsx(Divider, null), data.map(function (user) {\n        return __jsx(React.Fragment, null, __jsx(Block, null, __jsx(Avatar, {\n          src: user.avatarUrl\n        }), __jsx(Info, null, __jsx(Login, null, __jsx(Link, {\n          href: user.url,\n          target: \"_blank\"\n        }, user.login), __jsx(Name, null, user.name)), __jsx(Status, null, user.bio), __jsx(Icons, null, __jsx(LocationIcon, null, __jsx(FontAwesomeIcon, {\n          size: \"xs\",\n          icon: faMapMarkerAlt\n        })), __jsx(Location, null, user.location), user.email !== '' ? __jsx(React.Fragment, null, __jsx(MailIcon, null, __jsx(FontAwesomeIcon, {\n          icon: faEnvelope,\n          size: \"xs\"\n        })), __jsx(MailAdress, null, user.email)) : null, __jsx(StarIcon, null, __jsx(FontAwesomeIcon, {\n          icon: faStar,\n          size: \"xs\"\n        })), __jsx(Stars, null, _this2.props.sum[data.indexOf(user)] === undefined ? ' ' : Number(_this2.props.sum[data.indexOf(user)]).toLocaleString())))), __jsx(Divider, null));\n      })) // )\n      );\n    }\n  }]);\n\n  return ConnectedUsers;\n}(React.Component);\n\nvar UsersWithSumState = connect(sumStateToProps, null)(ConnectedUsers);\nvar UsersWithDataState = connect(dataStateToProps, null)(UsersWithSumState);\nvar UsersWithSumDispatched = connect(null, sumDispatchToProps)(UsersWithDataState);\nvar Users = connect(null, dataDispatchToProps)(UsersWithSumDispatched);\nexport default Users;","map":null,"metadata":{},"sourceType":"module"}